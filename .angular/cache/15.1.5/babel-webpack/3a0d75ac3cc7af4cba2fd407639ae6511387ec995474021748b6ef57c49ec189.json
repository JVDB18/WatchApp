{"ast":null,"code":"import { TraktService } from 'src/app/trakt.service';\nimport { ActivatedRoute, ParamMap } from '@angular/router';\nimport { Subscription } from 'rxjs';\nimport { Cast } from 'src/app/cast-crew';\nimport { AuthService } from 'src/app/auth.service';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"src/app/trakt.service\";\nimport * as i2 from \"@angular/router\";\nimport * as i3 from \"src/app/auth.service\";\nimport * as i4 from \"@angular/common\";\nimport * as i5 from \"../movie-details/movie-details.component\";\nimport * as i6 from \"../show-details/show-details.component\";\nfunction DetailsComponent_div_0_app_movie_details_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-movie-details\", 3);\n  }\n  if (rf & 2) {\n    const ctx_r2 = i0.ɵɵnextContext(2);\n    i0.ɵɵproperty(\"isLoggedIn\", ctx_r2.isLoggedIn)(\"related\", ctx_r2.related)(\"details\", ctx_r2.detailed)(\"cast\", ctx_r2.cast);\n  }\n}\nfunction DetailsComponent_div_0_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelementStart(0, \"div\");\n    i0.ɵɵtemplate(1, DetailsComponent_div_0_app_movie_details_1_Template, 1, 4, \"app-movie-details\", 2);\n    i0.ɵɵelementEnd();\n  }\n  if (rf & 2) {\n    const ctx_r0 = i0.ɵɵnextContext();\n    i0.ɵɵadvance(1);\n    i0.ɵɵproperty(\"ngIf\", ctx_r0.detailed);\n  }\n}\nfunction DetailsComponent_app_show_details_1_Template(rf, ctx) {\n  if (rf & 1) {\n    i0.ɵɵelement(0, \"app-show-details\", 4);\n  }\n  if (rf & 2) {\n    const ctx_r1 = i0.ɵɵnextContext();\n    i0.ɵɵproperty(\"isLoggedIn\", ctx_r1.isLoggedIn)(\"seasons\", ctx_r1.seasons)(\"cast\", ctx_r1.cast)(\"details\", ctx_r1.detailed)(\"related\", ctx_r1.related);\n  }\n}\nexport let DetailsComponent = /*#__PURE__*/(() => {\n  class DetailsComponent {\n    constructor(traktService, route, authService) {\n      this.traktService = traktService;\n      this.route = route;\n      this.authService = authService;\n      this.subscription = new Subscription();\n      this.people = 'people';\n    }\n    ngOnInit() {\n      this.route.data.subscribe(data => {\n        this.detailed = data.details;\n      });\n      this.getDetails();\n      this.authService.isLog$.subscribe(res => this.isLoggedIn = res);\n      console.log(this.isLoggedIn);\n    }\n    ngOnDestroy() {\n      this.subscription.unsubscribe();\n      if (!this.subscription.closed) {\n        return console.log('still subscribe');\n      } else {\n        return console.log('unsub');\n      }\n    }\n    getDetails() {\n      this.subscription.add(this.route.paramMap.subscribe(params => {\n        let id = params.get('slug');\n        console.log(id);\n        this.subscription.add(this.traktService.getSeason(id, 'seasons').subscribe(res => {\n          this.seasons = res.body;\n          console.log(this.seasons);\n        }));\n        let format = params.get('formattrakt');\n        console.log(format);\n        this.subscription.add(this.traktService.getRelatedById(format, id).pipe().subscribe(res => {\n          this.related = res;\n        }));\n        this.subscription.add(this.traktService.getActors(format, id, 1).pipe().subscribe(res => {\n          this.allpeople = res;\n          this.cast = this.allpeople.body.cast;\n        }));\n      }));\n    }\n  }\n  DetailsComponent.ɵfac = function DetailsComponent_Factory(t) {\n    return new (t || DetailsComponent)(i0.ɵɵdirectiveInject(i1.TraktService), i0.ɵɵdirectiveInject(i2.ActivatedRoute), i0.ɵɵdirectiveInject(i3.AuthService));\n  };\n  DetailsComponent.ɵcmp = /*@__PURE__*/i0.ɵɵdefineComponent({\n    type: DetailsComponent,\n    selectors: [[\"app-details\"]],\n    hostBindings: function DetailsComponent_HostBindings(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵlistener(\"beforeunload\", function DetailsComponent_beforeunload_HostBindingHandler() {\n          return ctx.ngOnDestroy();\n        }, false, i0.ɵɵresolveWindow);\n      }\n    },\n    decls: 2,\n    vars: 2,\n    consts: [[4, \"ngIf\"], [3, \"isLoggedIn\", \"seasons\", \"cast\", \"details\", \"related\", 4, \"ngIf\"], [3, \"isLoggedIn\", \"related\", \"details\", \"cast\", 4, \"ngIf\"], [3, \"isLoggedIn\", \"related\", \"details\", \"cast\"], [3, \"isLoggedIn\", \"seasons\", \"cast\", \"details\", \"related\"]],\n    template: function DetailsComponent_Template(rf, ctx) {\n      if (rf & 1) {\n        i0.ɵɵtemplate(0, DetailsComponent_div_0_Template, 2, 1, \"div\", 0);\n        i0.ɵɵtemplate(1, DetailsComponent_app_show_details_1_Template, 1, 5, \"app-show-details\", 1);\n      }\n      if (rf & 2) {\n        i0.ɵɵproperty(\"ngIf\", !ctx.detailed.aired_episodes);\n        i0.ɵɵadvance(1);\n        i0.ɵɵproperty(\"ngIf\", ctx.seasons);\n      }\n    },\n    dependencies: [i4.NgIf, i5.MovieDetailsComponent, i6.ShowDetailsComponent]\n  });\n  return DetailsComponent;\n})();","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}